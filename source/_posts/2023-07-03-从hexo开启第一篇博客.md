---
title: 从hexo开启第一篇博客
date: 2023-07-03 09:58:42
tags: Hexo
categories:
- Major
- Hexo
index_img: https://blog-pic-storage.oss-cn-shanghai.aliyuncs.com/img/202307042106887.png
excerpt: Hexo新手踩坑教程（bushi
---

## 前言

<p class='note note-success'>本教程基于Hexo博客，Hexo-Fluid主题，Github Pages,阿里云购买域名以及阿里云对象存储OSS实现</p>

{% note primary %}

[博客示例 ：konradlocas.top](https://konradlocas.top)

{% endnote %}

> 基础步骤：
>
> - 使用Hexo博客及Fluid主题搭建博客基本框架
> - 通过Github Actions使用Github Pages进行半自动化部署
> - 绑定所购域名（可选）
> - 使用阿里云OSS作为图床（可选Github仓库结合jsdelivr，但国内不稳定，不推荐）
> - 使用Typora进行Markdown写作

## 使用Hexo博客及Fluid主题搭建博客基本框架

 ### 安装hexo
安装使用hexo之前需要先安装`Node.js`和`Git`，之后，可以通过以下命令安装hexo:

```shell
$ npm install -g hexo-cli
```
可以通过以下命令查看主机中是否安装了node.js和npm

```shell
$ node --version    #检查是否安装了node.js
$ npm --version     #检查是否安装了npm,npm是node.js的包管理工具
```

执行下列命令，Hexo将会在指定目录中新建工作区

```shell
$ hexo init <folder>
$ cd <folder>
$ npm install
```

层级结构如下：

<img src="https://blog-pic-storage.oss-cn-shanghai.aliyuncs.com/img/202307231952233.png" alt="目录" style="zoom: 50%;" />

转到工作文件夹内，建立一个`.md`文档，使用以下命令：

```bash
$ hexo n [layout] <title>
```

如果添加环境变量总是失败，则使用以下命令：

```bash
$ npx hexo n [layout] <title>
# 作为一个程序猿，你该懂得[]里的是可选参数（我一开始也不懂），layout详见[^1]的Hexo官方注解
```

现在，你已经拥有第一篇博客文章（的毛坯）了！

具体语法可以使用Markdown语法，并参照{% post_link Hexo写作的基本语法 %}这篇文章

### 配置Hexo-Fluid[^1]

- 本指南中提到的："**站点配置**" 指的 Hexo 博客目录下的 `_config.yml`，"**主题配置**" 指的是 `theme/fluid/_config.yml` 或者 博客目录下的`_config.fluid.yml` ，注意区分；
- 本指南中提到的 `source` 目录都指的是博客目录下的 `source` 文件夹，不推荐修改主题内 `source` 目录；

- 本指南不包括所有的配置说明，几乎每个配置在**主题配置**中都有注释，可配合指南共同参考使用。

另外本指南仅包含主题范围内的使用说明，如果是 Hexo 的使用或者 Hexo 插件的使用，请查阅各自的文档。



Hexo 5.0.0 版本以上的用户，在`博客目录`下创建 `_config.fluid.yml` 文件，将主题的 [_config.yml](https://github.com/fluid-dev/hexo-theme-fluid/blob/master/_config.yml)全部配置（或部分配置）复制过去。

{% note success % }

以后如果修改任何主题配置，都只需修改 `_config.fluid.yml` 的配置即可。

{% endnote %}

注意：

- 只要存在于 `_config.fluid.yml` 的配置都是高优先级，修改原 `_config.yml` 是无效的。
- 每次更新主题可能存在配置变更，请注意更新说明，可能需要手动对 `_config.fluid.yml` 同步修改。
- 想查看覆盖配置有没有生效，可以通过 `hexo g --debug` 查看命令行输出。
- 如果想将某些配置覆盖为空，注意不要把主键删掉，不然是无法覆盖的，比如：

```yaml
about:
  icons:  # 不要把 icon 注释掉，否则无法覆盖配置
    # - { class: 'iconfont icon-github-fill', link: 'https://github.com' }
    # - { class: 'iconfont icon-wechat-fill', qrcode: '/img/favicon.png' }
```

## 通过Github Actions使用Github Pages进行半自动化部署[^2]

### 使用 GitHub Action

自己选择作为托管的仓库，建议使用`vscode`进行git推送，推送之后`GithubAction`会运行生成`GithubPages`

GithubAction配置具体步骤如下：

1、生成 SSH Key

```shell
 ssh-keygen -t rsa -C "xx@xx.com"# 自己的Github注册邮箱
```

生成的文件在 `用户名/.ssh` 目录中，`id_rsa` 为私钥文件，`id_rsa.pub` 为公钥文件。

2、代码仓库的 Actions 页签添加 workflow，如下图：![图片版权归参考文章所有](https://blog-pic-storage.oss-cn-shanghai.aliyuncs.com/img/202307232011329.jpeg)

3、创建的 workflow 为一个 `.yml` 文件，内容如下：

```yaml
 name: Pages

on:
  push:
    branches:
      - main # default branch

jobs:
  pages:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: actions/checkout@v2
      - name: Use Node.js 18.x
        uses: actions/setup-node@v2
        with:
          node-version: "18.16.1"
      - name: Cache NPM dependencies
        uses: actions/cache@v2
        with:
          path: node_modules
          key: ${{ runner.OS }}-npm-cache
          restore-keys: |
            ${{ runner.OS }}-npm-cache
      - name: Install Dependencies
        run: npm install
      - name: Build
        run: npm run build
      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./public
```

> 来自[peaceiris/actions-gh-pages](https://github.com/peaceiris/actions-gh-pages)无需配置gh_deploy_keys,推荐使用

###  GitHub Page 绑定域名（可选）

1、在仓库的 Settings 的 Pages 项中部署Pages，并进行域名的设置，如下图：<img src="https://blog-pic-storage.oss-cn-shanghai.aliyuncs.com/img/202307232051726.png" style="zoom: 50%;" />

2、在仓库的根目录下创建 CNAME 文件，内容为域名，如下图：

<img src="https://blog-pic-storage.oss-cn-shanghai.aliyuncs.com/img/202307232048222.png" style="zoom:50%;" />

### 域名问题

每次 push 代码自动构建发布后，GitHub Page 的仓库中配置的域名会丢失。按照如下步骤可以解决：

1、在网站根目录的` _config.yml` 文件中找到 `skip_render` 节点，配置 `CNAME` ，如下图：

<img src="https://blog-pic-storage.oss-cn-shanghai.aliyuncs.com/img/202307232053760.png" style="zoom: 50%;" />

2、在 `/source `目录中创建一个文件，命名为 `CNAME `，里边的内容为你的域名。例如我的域名为：https://konradlocas.top 该文件的内容为：konradlocas.top 。

<img src="https://blog-pic-storage.oss-cn-shanghai.aliyuncs.com/img/202307232052107.png" style="zoom: 50%;" />

## 使用阿里云OSS作为图床

（可选Github仓库结合jsdelivr，但国内不稳定，不推荐）



## 参考

[^1]: [Hexo Theme Fluid](https://fluid-dev.com/posts/fluid-write/)
[^2]: [公众号：不止dotNET](https://mp.weixin.qq.com/s/jVVTHuu22MSN8dnCGQzJjQ)

